{"ast":null,"code":"import { useQuery } from \"react-query\";\nimport { api } from \"../api\";\n\nasync function getClients(page) {\n  //const response = await fetch('http://localhost:3000/api/users')\n  //const data = await response.json()\n  const {\n    data,\n    headers\n  } = await api.get(`/clients/${page}`);\n  const totalCount = Number(headers[\"x-total-count\"]);\n  const clients = data.clients.map(client => {\n    return {\n      id: client.id,\n      name: client.name,\n      number: client.number,\n      created_at: new Date(client.created_at).toLocaleDateString(\"pt-BR\", {\n        day: \"2-digit\",\n        month: \"long\",\n        year: \"numeric\"\n      })\n    };\n  });\n  return {\n    clients,\n    totalCount\n  };\n}\n\nexport function useClients(page) {\n  //return useQuery('clients', () => getclients(page), {\n  return useQuery([\"clients\", page], () => getClients(page), {\n    staleTime: 1000 //10 minutos\n\n  });\n} // Esse 3.o parâmetro staleTime é opcional.\n// Se for informado, define o tempo que o react-query\n// vai buscar novamente os dados. No caso, após 5 seg.\n// Antes de 5 segundos, os dados são considerados \"Fresh\".\n// Após 5 seg, são considerados stale (antigo), e faz refresh.","map":{"version":3,"sources":["/home/smoke/Área de Trabalho/dashgo/src/services/hooks/useClients.ts"],"names":["useQuery","api","getClients","page","data","headers","get","totalCount","Number","clients","map","client","id","name","number","created_at","Date","toLocaleDateString","day","month","year","useClients","staleTime"],"mappings":"AAAA,SAASA,QAAT,QAAyB,aAAzB;AACA,SAASC,GAAT,QAAoB,QAApB;;AAcA,eAAeC,UAAf,CAA0BC,IAA1B,EAAgE;AAC9D;AACA;AACA,QAAM;AAAEC,IAAAA,IAAF;AAAQC,IAAAA;AAAR,MAAoB,MAAMJ,GAAG,CAACK,GAAJ,CAAS,YAAWH,IAAK,EAAzB,CAAhC;AAEA,QAAMI,UAAU,GAAGC,MAAM,CAACH,OAAO,CAAC,eAAD,CAAR,CAAzB;AAEA,QAAMI,OAAO,GAAGL,IAAI,CAACK,OAAL,CAAaC,GAAb,CAAkBC,MAAD,IAAoB;AACnD,WAAO;AACLC,MAAAA,EAAE,EAAED,MAAM,CAACC,EADN;AAELC,MAAAA,IAAI,EAAEF,MAAM,CAACE,IAFR;AAGLC,MAAAA,MAAM,EAAEH,MAAM,CAACG,MAHV;AAILC,MAAAA,UAAU,EAAE,IAAIC,IAAJ,CAASL,MAAM,CAACI,UAAhB,EAA4BE,kBAA5B,CAA+C,OAA/C,EAAwD;AAClEC,QAAAA,GAAG,EAAE,SAD6D;AAElEC,QAAAA,KAAK,EAAE,MAF2D;AAGlEC,QAAAA,IAAI,EAAE;AAH4D,OAAxD;AAJP,KAAP;AAUD,GAXe,CAAhB;AAaA,SAAO;AACLX,IAAAA,OADK;AAELF,IAAAA;AAFK,GAAP;AAID;;AAED,OAAO,SAASc,UAAT,CAAoBlB,IAApB,EAAkC;AACvC;AACA,SAAOH,QAAQ,CAAC,CAAC,SAAD,EAAYG,IAAZ,CAAD,EAAoB,MAAMD,UAAU,CAACC,IAAD,CAApC,EAA4C;AACzDmB,IAAAA,SAAS,EAAE,IAD8C,CACxC;;AADwC,GAA5C,CAAf;AAGD,C,CAED;AACA;AACA;AACA;AACA","sourcesContent":["import { useQuery } from \"react-query\";\nimport { api } from \"../api\";\n\ntype Client = {\n  id: string;\n  name: string;\n  number: string;\n  created_at: string;\n};\n\ntype UsersResponse = {\n  totalCount: number;\n  clients: Client[];\n};\n\nasync function getClients(page: number): Promise<UsersResponse> {\n  //const response = await fetch('http://localhost:3000/api/users')\n  //const data = await response.json()\n  const { data, headers } = await api.get(`/clients/${page}`);\n\n  const totalCount = Number(headers[\"x-total-count\"]);\n\n  const clients = data.clients.map((client: Client) => {\n    return {\n      id: client.id,\n      name: client.name,\n      number: client.number,\n      created_at: new Date(client.created_at).toLocaleDateString(\"pt-BR\", {\n        day: \"2-digit\",\n        month: \"long\",\n        year: \"numeric\",\n      }),\n    };\n  });\n\n  return {\n    clients,\n    totalCount,\n  };\n}\n\nexport function useClients(page: number) {\n  //return useQuery('clients', () => getclients(page), {\n  return useQuery([\"clients\", page], () => getClients(page), {\n    staleTime: 1000, //10 minutos\n  });\n}\n\n// Esse 3.o parâmetro staleTime é opcional.\n// Se for informado, define o tempo que o react-query\n// vai buscar novamente os dados. No caso, após 5 seg.\n// Antes de 5 segundos, os dados são considerados \"Fresh\".\n// Após 5 seg, são considerados stale (antigo), e faz refresh.\n"]},"metadata":{},"sourceType":"module"}