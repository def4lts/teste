{"ast":null,"code":"import _regeneratorRuntime from \"/home/smoke/\\xC1rea de Trabalho/dashgo/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _asyncToGenerator from \"/home/smoke/\\xC1rea de Trabalho/dashgo/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"/home/smoke/\\xC1rea de Trabalho/dashgo/src/pages/users/index.tsx\",\n    _s = $RefreshSig$();\n\nimport { useState } from 'react';\nimport { Box, Flex, Button, Heading, Icon, Spinner } from '@chakra-ui/react';\nimport { Link, Table, Thead, Tbody, Tr, Th, Td } from '@chakra-ui/react';\nimport { Checkbox, Text, useBreakpointValue } from '@chakra-ui/react';\nimport { RiAddLine, RiPencilLine } from 'react-icons/ri';\nimport { Header } from '../../components/Header';\nimport { Sidebar } from '../../components/Sidebar';\nimport { Pagination } from '../../components/Pagination';\nimport { useUsers } from '../../services/hooks/useUsers';\nimport { queryClient } from '../../services/queryClient';\nimport { api } from '../../services/api';\nexport default function UserList() {\n  _s();\n\n  var _this = this;\n\n  var _useState = useState(1),\n      curPage = _useState[0],\n      setCurPage = _useState[1]; // isLoading é o 1.o carregamento dos dados\n\n\n  var _useUsers = useUsers(curPage),\n      data = _useUsers.data,\n      isLoading = _useUsers.isLoading,\n      isFetching = _useUsers.isFetching,\n      error = _useUsers.error;\n\n  var isTelaGrande = useBreakpointValue({\n    base: false,\n    lg: true\n  }); // Ao passar o mouse sobre o nome do usuário, o react-query \n  // pré-carrega os dados do usuário e armazena em cache\n\n  function handlePrefetchUser(_x) {\n    return _handlePrefetchUser.apply(this, arguments);\n  }\n\n  function _handlePrefetchUser() {\n    _handlePrefetchUser = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(userId) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return queryClient.prefetchQuery(['user', userId], /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n                var response;\n                return _regeneratorRuntime.wrap(function _callee$(_context) {\n                  while (1) {\n                    switch (_context.prev = _context.next) {\n                      case 0:\n                        _context.next = 2;\n                        return api.get(\"users/\".concat(userId));\n\n                      case 2:\n                        response = _context.sent;\n                        return _context.abrupt(\"return\", response.data);\n\n                      case 4:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }\n                }, _callee);\n              })), {\n                staleTime: 1000 * 60 * 10 // 10 minutos\n\n              });\n\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    return _handlePrefetchUser.apply(this, arguments);\n  }\n\n  return /*#__PURE__*/_jsxDEV(Box, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 10\n    }, this), /*#__PURE__*/_jsxDEV(Flex, {\n      w: \"100%\",\n      my: \"6\",\n      maxWidth: 1480,\n      mx: \"auto\",\n      px: \"6\",\n      children: [/*#__PURE__*/_jsxDEV(Sidebar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        flex: \"1\",\n        borderRadius: 8,\n        bg: \"gray.800\",\n        p: \"8\",\n        children: [/*#__PURE__*/_jsxDEV(Flex, {\n          mb: \"8\",\n          justifyContent: \"space-between\",\n          align: \"center\",\n          children: [/*#__PURE__*/_jsxDEV(Heading, {\n            size: \"lg\",\n            fontWeight: \"normal\",\n            children: [\"Usu\\xE1rios\", !isLoading && isFetching && /*#__PURE__*/_jsxDEV(Spinner, {\n              color: \"gray.500\",\n              ml: \"4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 53,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            as: \"a\",\n            href: \"/users/create\",\n            size: \"sm\",\n            fontSize: \"sm\",\n            colorScheme: \"messenger\",\n            leftIcon: /*#__PURE__*/_jsxDEV(Icon, {\n              as: RiAddLine,\n              fontSize: \"20\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 63,\n              columnNumber: 32\n            }, this),\n            children: \"Criar novo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 16\n        }, this), isLoading ? /*#__PURE__*/_jsxDEV(Flex, {\n          justify: \"center\",\n          children: /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 18\n        }, this) : error ? /*#__PURE__*/_jsxDEV(Flex, {\n          justify: \"center\",\n          children: /*#__PURE__*/_jsxDEV(Text, {\n            children: \"Falha ao obter dados dos usu\\xE1rios\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 19\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Table, {\n            colorScheme: \"whiteAlpha\",\n            children: [/*#__PURE__*/_jsxDEV(Thead, {\n              children: /*#__PURE__*/_jsxDEV(Tr, {\n                children: [/*#__PURE__*/_jsxDEV(Th, {\n                  px: [\"4\", \"4\", \"6\"],\n                  color: \"gray.300\",\n                  width: \"8\",\n                  children: /*#__PURE__*/_jsxDEV(Checkbox, {\n                    colorScheme: \"messenger\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 86,\n                    columnNumber: 31\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 85,\n                  columnNumber: 28\n                }, this), /*#__PURE__*/_jsxDEV(Th, {\n                  children: \"Usu\\xE1rio\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 88,\n                  columnNumber: 28\n                }, this), isTelaGrande && /*#__PURE__*/_jsxDEV(Th, {\n                  children: \"Data de cadastro\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 89,\n                  columnNumber: 46\n                }, this), /*#__PURE__*/_jsxDEV(Th, {\n                  width: \"8\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 90,\n                  columnNumber: 28\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 84,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 22\n            }, this), /*#__PURE__*/_jsxDEV(Tbody, {\n              children: data.users.map(function (user) {\n                return /*#__PURE__*/_jsxDEV(Tr, {\n                  children: [/*#__PURE__*/_jsxDEV(Td, {\n                    px: [\"4\", \"4\", \"6\"],\n                    children: /*#__PURE__*/_jsxDEV(Checkbox, {\n                      colorScheme: \"messenger\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 98,\n                      columnNumber: 31\n                    }, _this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 97,\n                    columnNumber: 28\n                  }, _this), /*#__PURE__*/_jsxDEV(Td, {\n                    children: /*#__PURE__*/_jsxDEV(Box, {\n                      children: [/*#__PURE__*/_jsxDEV(Link, {\n                        color: \"messenger.100\",\n                        onMouseEnter: function onMouseEnter() {\n                          return handlePrefetchUser(user.id);\n                        },\n                        children: /*#__PURE__*/_jsxDEV(Text, {\n                          fontWeight: \"bold\",\n                          children: user.name\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 106,\n                          columnNumber: 37\n                        }, _this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 102,\n                        columnNumber: 34\n                      }, _this), /*#__PURE__*/_jsxDEV(Text, {\n                        fontSize: \"sm\",\n                        color: \"gray.300\",\n                        children: user.email\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 108,\n                        columnNumber: 34\n                      }, _this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 101,\n                      columnNumber: 31\n                    }, _this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 100,\n                    columnNumber: 28\n                  }, _this), isTelaGrande && /*#__PURE__*/_jsxDEV(Td, {\n                    children: user.created_at\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 113,\n                    columnNumber: 46\n                  }, _this), /*#__PURE__*/_jsxDEV(Td, {\n                    children: /*#__PURE__*/_jsxDEV(Button, {\n                      as: \"a\",\n                      size: \"sm\",\n                      fontSize: \"sm\",\n                      colorScheme: \"green\",\n                      leftIcon: /*#__PURE__*/_jsxDEV(Icon, {\n                        as: RiPencilLine,\n                        fontSize: \"16\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 120,\n                        columnNumber: 44\n                      }, _this),\n                      children: isTelaGrande ? \"Editar\" : \"\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 115,\n                      columnNumber: 31\n                    }, _this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 114,\n                    columnNumber: 28\n                  }, _this)]\n                }, user.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 96,\n                  columnNumber: 28\n                }, _this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 22\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(Pagination, {\n            totalCountOfRegisters: data.totalCount,\n            currentPage: curPage,\n            onPageChange: setCurPage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 10\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 7\n  }, this);\n}\n\n_s(UserList, \"ZBJv3L39DtiLWN1Q95E9Scq+OfU=\", false, function () {\n  return [useUsers, useBreakpointValue];\n});\n\n_c = UserList;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserList\");","map":{"version":3,"sources":["/home/smoke/Área de Trabalho/dashgo/src/pages/users/index.tsx"],"names":["useState","Box","Flex","Button","Heading","Icon","Spinner","Link","Table","Thead","Tbody","Tr","Th","Td","Checkbox","Text","useBreakpointValue","RiAddLine","RiPencilLine","Header","Sidebar","Pagination","useUsers","queryClient","api","UserList","curPage","setCurPage","data","isLoading","isFetching","error","isTelaGrande","base","lg","handlePrefetchUser","userId","prefetchQuery","get","response","staleTime","users","map","user","id","name","email","created_at","totalCount"],"mappings":"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","sourcesContent":["import { useState } from 'react'\nimport { Box, Flex, Button, Heading, Icon, Spinner } from '@chakra-ui/react'\nimport { Link, Table, Thead, Tbody, Tr, Th, Td } from '@chakra-ui/react'\nimport { Checkbox, Text, useBreakpointValue } from '@chakra-ui/react'\nimport { RiAddLine, RiPencilLine } from 'react-icons/ri'\n\nimport { Header } from '../../components/Header'\nimport { Sidebar } from '../../components/Sidebar'\nimport { Pagination } from '../../components/Pagination'\nimport { useUsers } from '../../services/hooks/useUsers'\nimport { queryClient } from '../../services/queryClient'\nimport { api } from '../../services/api'\n\nexport default function UserList() {\n   const [curPage, setCurPage] = useState(1)\n\n   // isLoading é o 1.o carregamento dos dados\n   const { data, isLoading, isFetching, error } = useUsers(curPage)\n   \n   const isTelaGrande = useBreakpointValue({\n      base: false,\n      lg: true\n   })\n\n   // Ao passar o mouse sobre o nome do usuário, o react-query \n   // pré-carrega os dados do usuário e armazena em cache\n   async function handlePrefetchUser(userId: string) {\n      await queryClient.prefetchQuery(['user', userId], async () => {\n         const response = await api.get(`users/${userId}`)\n\n         return response.data\n      }, {\n         staleTime: 1000 * 60 * 10 // 10 minutos\n      })\n   }\n\n   return (\n      <Box>\n         <Header />\n\n         <Flex w=\"100%\" my=\"6\" maxWidth={1480} mx=\"auto\" px=\"6\">\n            <Sidebar />        \n\n            <Box flex=\"1\" borderRadius={8} bg=\"gray.800\" p=\"8\">\n               <Flex mb=\"8\" justifyContent=\"space-between\" align=\"center\">\n                 \n                  <Heading \n                     size=\"lg\" \n                     fontWeight=\"normal\"\n                  >\n                     Usuários\n                     { !isLoading && isFetching && \n                        <Spinner color=\"gray.500\" ml=\"4\" /> }\n                  </Heading>\n                  \n                  {/*<Link href=\"/users/create\" passHref>*/}\n                  <Button \n                     as=\"a\" \n                     href=\"/users/create\"\n                     size=\"sm\" \n                     fontSize=\"sm\" \n                     colorScheme=\"messenger\"\n                     leftIcon={<Icon as={RiAddLine} fontSize=\"20\" />}\n                     >\n                     Criar novo\n                  </Button>\n                  {/*</Link>*/}\n               </Flex>\n\n               { isLoading ? (\n                 <Flex justify=\"center\">\n                    <Spinner />\n                 </Flex>\n\n               ) : error ? (\n                  <Flex justify=\"center\">\n                    <Text>Falha ao obter dados dos usuários</Text>\n                 </Flex>\n\n               ) : (\n                  <>\n                  <Table colorScheme=\"whiteAlpha\">\n                     <Thead>\n                        <Tr>\n                           <Th px={[\"4\", \"4\", \"6\"]} color=\"gray.300\" width=\"8\">\n                              <Checkbox colorScheme=\"messenger\" />\n                           </Th>\n                           <Th>Usuário</Th>\n                           { isTelaGrande && <Th>Data de cadastro</Th> }\n                           <Th width=\"8\"></Th>\n                        </Tr>\n                     </Thead>\n                     <Tbody>\n\n                        { data.users.map(user => (\n                           <Tr key={ user.id }>\n                           <Td px={[\"4\", \"4\", \"6\"]} >\n                              <Checkbox colorScheme=\"messenger\" />\n                           </Td>\n                           <Td>\n                              <Box>\n                                 <Link \n                                    color=\"messenger.100\"\n                                    onMouseEnter={() => handlePrefetchUser(user.id)}\n                                 >\n                                    <Text fontWeight=\"bold\">{ user.name }</Text>\n                                 </Link>\n                                 <Text fontSize=\"sm\" color=\"gray.300\">\n                                    { user.email }\n                                 </Text>\n                              </Box>\n                           </Td>\n                           { isTelaGrande && <Td>{ user.created_at }</Td> }\n                           <Td>\n                              <Button \n                                 as=\"a\" \n                                 size=\"sm\" \n                                 fontSize=\"sm\"                               \n                                 colorScheme=\"green\"\n                                 leftIcon={<Icon as={RiPencilLine} fontSize=\"16\" />}\n                                 >\n                                 { isTelaGrande ? \"Editar\" : \"\" }\n                              </Button>\n                           </Td>\n                        </Tr>\n                        )) }\n\n                     </Tbody>\n                  </Table>\n\n                  <Pagination \n                     totalCountOfRegisters={data.totalCount}\n                     currentPage={curPage}\n                     onPageChange={setCurPage}\n                  />\n                  </>\n               )}\n\n            </Box>\n         </Flex>\n      </Box>\n   )\n}"]},"metadata":{},"sourceType":"module"}