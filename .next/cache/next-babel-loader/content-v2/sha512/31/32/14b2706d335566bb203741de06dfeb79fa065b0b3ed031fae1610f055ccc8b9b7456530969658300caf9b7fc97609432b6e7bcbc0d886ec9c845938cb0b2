{"ast":null,"code":"import { useQuery } from \"react-query\";\nimport { api } from \"../api\";\n\nasync function getAll() {\n  let responseProducts = await api.get(`/products/1`);\n  let totalProducts = Number(responseProducts.data.total);\n  let responseClients = await api.get(`/clients/1`);\n  let totalClients = Number(responseClients.data.total);\n  let responsePurchases = await api.get(`/purchases/1`);\n  let totalPurchases = Number(responsePurchases.data.total);\n  let clients = responseClients.data.clients.map(client => {\n    return {\n      id: client.id,\n      name: client.name,\n      number: client.number,\n      created_at: new Date(client.created_at).toLocaleDateString(\"pt-BR\", {\n        day: \"2-digit\",\n        month: \"long\",\n        year: \"numeric\"\n      })\n    };\n  });\n  let purchases = responsePurchases.data.purchases.map(purchase => {\n    return {\n      id: purchase.id,\n      product_id: purchase.product_id,\n      price: purchase.price,\n      created_at: new Date(purchase.created_at).toLocaleDateString(\"pt-BR\", {\n        day: \"2-digit\",\n        month: \"long\",\n        year: \"numeric\"\n      })\n    };\n  });\n  const clientsSlice = clients.slice(0, 5);\n  const purchasesSlice = purchases.slice(0, 5);\n  return {\n    totalProducts,\n    totalClients,\n    totalPurchases,\n    clientsSlice,\n    purchasesSlice\n  };\n}\n\nexport function useAll() {\n  return useQuery(\"all\", () => getAll(), {\n    staleTime: 1000\n  });\n}","map":{"version":3,"sources":["/home/smoke/√Årea de Trabalho/dashgo/src/services/hooks/useAll.ts"],"names":["useQuery","api","getAll","responseProducts","get","totalProducts","Number","data","total","responseClients","totalClients","responsePurchases","totalPurchases","clients","map","client","id","name","number","created_at","Date","toLocaleDateString","day","month","year","purchases","purchase","product_id","price","clientsSlice","slice","purchasesSlice","useAll","staleTime"],"mappings":"AAAA,SAASA,QAAT,QAAyB,aAAzB;AACA,SAASC,GAAT,QAAoB,QAApB;;AAwBA,eAAeC,MAAf,GAA8C;AAC5C,MAAIC,gBAAgB,GAAG,MAAMF,GAAG,CAACG,GAAJ,CAAS,aAAT,CAA7B;AACA,MAAIC,aAAa,GAAGC,MAAM,CAACH,gBAAgB,CAACI,IAAjB,CAAsBC,KAAvB,CAA1B;AAEA,MAAIC,eAAe,GAAG,MAAMR,GAAG,CAACG,GAAJ,CAAS,YAAT,CAA5B;AACA,MAAIM,YAAY,GAAGJ,MAAM,CAACG,eAAe,CAACF,IAAhB,CAAqBC,KAAtB,CAAzB;AAEA,MAAIG,iBAAiB,GAAG,MAAMV,GAAG,CAACG,GAAJ,CAAS,cAAT,CAA9B;AACA,MAAIQ,cAAc,GAAGN,MAAM,CAACK,iBAAiB,CAACJ,IAAlB,CAAuBC,KAAxB,CAA3B;AAEA,MAAIK,OAAO,GAAGJ,eAAe,CAACF,IAAhB,CAAqBM,OAArB,CAA6BC,GAA7B,CAAkCC,MAAD,IAAoB;AACjE,WAAO;AACLC,MAAAA,EAAE,EAAED,MAAM,CAACC,EADN;AAELC,MAAAA,IAAI,EAAEF,MAAM,CAACE,IAFR;AAGLC,MAAAA,MAAM,EAAEH,MAAM,CAACG,MAHV;AAILC,MAAAA,UAAU,EAAE,IAAIC,IAAJ,CAASL,MAAM,CAACI,UAAhB,EAA4BE,kBAA5B,CAA+C,OAA/C,EAAwD;AAClEC,QAAAA,GAAG,EAAE,SAD6D;AAElEC,QAAAA,KAAK,EAAE,MAF2D;AAGlEC,QAAAA,IAAI,EAAE;AAH4D,OAAxD;AAJP,KAAP;AAUD,GAXa,CAAd;AAaA,MAAIC,SAAS,GAAGd,iBAAiB,CAACJ,IAAlB,CAAuBkB,SAAvB,CAAiCX,GAAjC,CAAsCY,QAAD,IAAwB;AAC3E,WAAO;AACLV,MAAAA,EAAE,EAAEU,QAAQ,CAACV,EADR;AAELW,MAAAA,UAAU,EAAED,QAAQ,CAACC,UAFhB;AAGLC,MAAAA,KAAK,EAAEF,QAAQ,CAACE,KAHX;AAILT,MAAAA,UAAU,EAAE,IAAIC,IAAJ,CAASM,QAAQ,CAACP,UAAlB,EAA8BE,kBAA9B,CAAiD,OAAjD,EAA0D;AACpEC,QAAAA,GAAG,EAAE,SAD+D;AAEpEC,QAAAA,KAAK,EAAE,MAF6D;AAGpEC,QAAAA,IAAI,EAAE;AAH8D,OAA1D;AAJP,KAAP;AAUD,GAXe,CAAhB;AAaA,QAAMK,YAAY,GAAGhB,OAAO,CAACiB,KAAR,CAAc,CAAd,EAAiB,CAAjB,CAArB;AACA,QAAMC,cAAc,GAAGN,SAAS,CAACK,KAAV,CAAgB,CAAhB,EAAmB,CAAnB,CAAvB;AAEA,SAAO;AACLzB,IAAAA,aADK;AAELK,IAAAA,YAFK;AAGLE,IAAAA,cAHK;AAILiB,IAAAA,YAJK;AAKLE,IAAAA;AALK,GAAP;AAOD;;AAED,OAAO,SAASC,MAAT,GAAkB;AACvB,SAAOhC,QAAQ,CAAC,KAAD,EAAQ,MAAME,MAAM,EAApB,EAAwB;AACrC+B,IAAAA,SAAS,EAAE;AAD0B,GAAxB,CAAf;AAGD","sourcesContent":["import { useQuery } from \"react-query\";\nimport { api } from \"../api\";\n\ntype Client = {\n  id: string;\n  name: string;\n  number: string;\n  created_at: string;\n};\n\ntype Purchase = {\n  id: string;\n  product_id: string;\n  price: string;\n  created_at: string;\n};\n\ntype AllResponse = {\n  totalProducts: number;\n  totalClients: number;\n  totalPurchases: number;\n  purchasesSlice: Purchase[];\n  clientsSlice: Client[];\n};\n\nasync function getAll(): Promise<AllResponse> {\n  let responseProducts = await api.get(`/products/1`);\n  let totalProducts = Number(responseProducts.data.total);\n\n  let responseClients = await api.get(`/clients/1`);\n  let totalClients = Number(responseClients.data.total);\n\n  let responsePurchases = await api.get(`/purchases/1`);\n  let totalPurchases = Number(responsePurchases.data.total);\n\n  let clients = responseClients.data.clients.map((client: Client) => {\n    return {\n      id: client.id,\n      name: client.name,\n      number: client.number,\n      created_at: new Date(client.created_at).toLocaleDateString(\"pt-BR\", {\n        day: \"2-digit\",\n        month: \"long\",\n        year: \"numeric\",\n      }),\n    };\n  });\n\n  let purchases = responsePurchases.data.purchases.map((purchase: Purchase) => {\n    return {\n      id: purchase.id,\n      product_id: purchase.product_id,\n      price: purchase.price,\n      created_at: new Date(purchase.created_at).toLocaleDateString(\"pt-BR\", {\n        day: \"2-digit\",\n        month: \"long\",\n        year: \"numeric\",\n      }),\n    };\n  });\n\n  const clientsSlice = clients.slice(0, 5);\n  const purchasesSlice = purchases.slice(0, 5);\n\n  return {\n    totalProducts,\n    totalClients,\n    totalPurchases,\n    clientsSlice,\n    purchasesSlice,\n  };\n}\n\nexport function useAll() {\n  return useQuery(\"all\", () => getAll(), {\n    staleTime: 1000,\n  });\n}\n"]},"metadata":{},"sourceType":"module"}